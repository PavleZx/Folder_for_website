website_data = {
   "website":"Trading Cards",
   "categories":[
      {
         "name":"Spell-Monsters",
         "image":"tech.jpg",
         "products":[
            {
               "name":"Endymion the Mighty Master of Magic &nbsp 5$",
               "image":"images/1.jpg"
            },
            {
               "name":"Reflection of Endymion &nbsp4$",
               "image":"images/2.jpg"
            },
            {
               "name":"Servant of Endymion &nbsp4$",
               "image":"images/3.jpg"
            },
            {
               "name":"Magister of Endymion &nbsp3$",
               "image":"images/4.jpg"
            },
            {
               "name":"Mythical Beast Bashilisk &nbsp3$",
               "image":"images/6.jpg" 
            },
            {
               "name":"Magical Abductor &nbsp2$",
               "image":"images/5.jpg" 
            }
         ]
      },
      {
         "name":"Regular Monsters",
         "image":"tech.jpg",
         "products":[
            {
               "name":"Sibirski Plavac &nbsp100$",
               "image":"images/slika100.png"
            },{
               "name":"Arcanite Magician &nbsp4$",
               "image":"images/7.jpg"
            },{
              "name":"Shining Magical Warrior &nbsp4$",
              "image":"images/8.jpg"
           },{
              "name":"Crusader of Endymion &nbsp3$",
              "image":"images/9.jpg"
           },{
              "name":"Droll and Lock bird &nbsp3$",
              "image":"images/10.jpg"
           },{
              "name":"Fairty-Tail Luna &nbsp2$",
              "image":"images/11.jpg"
           }
         ]
      },{
        "name":"Spell Cards",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Spell Power Mastery &nbsp5$",
              "image":"images/12.jpg"
           },{
             "name":"Spell Power Grasp &nbsp4$",
             "image":"images/13.jpg"
          },{
             "name":"Citadel of Endymion &nbsp4$",
             "image":"images/14.jpg"
          },{
             "name":"Dwimmered Path &nbsp3$",
             "image":"images/15.jpg"
          },{
             "name":"Pot of Desires &nbsp3$",
             "image":"images/16.jpg"
          },{
           "name":"Mystical Space Typhoon &nbsp3$",
           "image":"images/17.jpg"
        }
        ]
     },{
        "name":"Trap Cards",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Trap Stun &nbsp3$",
              "image":"images/22.jpg"
           },{
             "name":"Threatening Roar &nbsp4$",
             "image":"images/21.jpg"
          },{
             "name":"Dust Tornado &nbsp3$",
             "image":"images/24.jpg"
          },{
             "name":"Radiant Mirror Force &nbsp4$",
             "image":"images/26.jpg"
          },{
             "name":"Draining Shield &nbsp4$",
             "image":"images/27.jpg"
          },{
           "name":"Magic Cylinders &nbsp4$",
           "image":"images/28.jpg"
        },{
           "name":"Sakuretsu Armor &nbsp3$",
           "image":"images/25.jpg"
        },{
           "name":"Void Trap Hole &nbsp2$",
           "image":"images/23.jpg"
        }
        ]
     },
     {
        "name":"Ancient type",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Arcanite Dragon &nbsp4$",
              "image":"images/slika31.png"
           },{
             "name":"Marble Angel &nbsp4$",
             "image":"images/slika32.png"
          },{
             "name":"Aprentice Magician &nbsp3$",
             "image":"images/slika33.png"
          },{
             "name":"Algae Dragon &nbsp3$",
             "image":"images/slika34.png"
          },{
             "name":"Fire Warrior Emblem &nbsp2$",
             "image":"images/slika35.png"
          }
        ]
     },
     {
        "name":"Hero type",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Elemental Hero Neos &nbsp4$",
              "image":"images/slika91.png"
           },{
             "name":"Elemental Hero Necros &nbsp4$",
             "image":"images/slika92.png"
          },{
             "name":"Elemental Hero Bubbleman &nbsp3$",
             "image":"images/slika93.png"
          },{
             "name":"Elemental Hero Avian &nbsp3$",
             "image":"images/slika94.png"
          },{
             "name":"Elemental Hero Sparkman &nbsp2$",
             "image":"images/slika95.png"
          }
        ]
     },
     {
        "name":"Dragon type",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Dark Tornado Dragon &nbsp4$",
              "image":"images/slika81.png"
           },{
             "name":"Flaming Dragon &nbsp4$",
             "image":"images/slika82.png"
          },{
             "name":"Electric Soul Dragon &nbsp3$",
             "image":"images/slika83.png"
          },{
             "name":"Lvl 4 Dark Draco &nbsp3$",
             "image":"images/slika84.png"
          },{
             "name":"Green Winged Fairy Dragon &nbsp2$",
             "image":"images/slika85.png"
          }
        ]
     },
     {
        "name":"Dark type",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Dark Flame Dragon &nbsp4$",
              "image":"images/slika73.png"
           },{
             "name":"Metal Phoenix Warrior &nbsp4$",
             "image":"images/slika62.png"
          },{
             "name":"Shadow Ice Master &nbsp3$",
             "image":"images/slika63.png"
          },{
             "name":"Shadow Ice Warrioress &nbsp3$",
             "image":"images/slika64.png"
          },{
             "name":"Golden Tiger Warrior &nbsp2$",
             "image":"images/slika65.png"
          }
        ]
     },
     {
        "name":"Mythical Monsters",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Three Soul King Archanis &nbsp5$",
              "image":"images/slika51.png"
           },{
             "name":"Black Luster Soldier &nbsp5$",
             "image":"images/slika52.png"
          },{
             "name":"Blue Eyes Ultimate Dragon &nbsp5$",
             "image":"images/slika53.png"
          },{
             "name":"Dark Chaos Dragon &nbsp5$",
             "image":"images/slika54.png"
          },{
             "name":"Lu-Kang Master of Martial Arts &nbsp3$",
             "image":"images/slika55.png"
          }
        ]
     },
     {
        "name":"Machine type",
        "image":"tech.jpg",
        "products":[
           {
              "name":"Anicent Gear Commando &nbsp4$",
              "image":"images/slika41.png"
           },{
             "name":"Anicent Gear Golem &nbsp4$",
             "image":"images/slika42.png"
          },{
             "name":"Anicent Gear Knight &nbsp3$",
             "image":"images/slika43.png"
          },{
             "name":"Ancient Gear Soldier &nbsp3$",
             "image":"images/slika44.png"
          },{
             "name":"Ancient Gear Battle Hound &nbsp2$",
             "image":"images/slika45.png"
          }
        ]
     }
   ]
}

let data = website_data.categories;
let length = data.length;
let inner_length = 0;
let first_visit = true;
let str = '';

if (first_visit == true){
  str = '';
  for (let j = 0; j < length; j++){
     str += '<a onclick="funkcija(' + j + ')"><div class="category">' + data[j].name + '</div></a>'
  }
  document.querySelector('.categories').innerHTML = str;
  first_visit == false;
}


let wish_list = JSON.parse(localStorage.getItem('wish_list'));
if (!wish_list){
   wish_list = {};
}

let total = JSON.parse(localStorage.getItem('total'));
if (!total){
   total = 0;
}
localStorage.total = JSON.stringify(total);
   
let keys = Object.keys(wish_list);
str = '';
for (let i = 0; i < keys.length; i++){
   str +=  '<div class = item_amount_line>' +  keys[i] + ': <div class = item_amount>' + wish_list[keys[i]].amount + ' <button class = cart_gumb onclick = "remove(' + i + ')"> - </button><button class = cart_gumb onclick = "add(' + i + ')"> + </button></div></div>'; 
}



function remove(number){
   wish_list = JSON.parse(localStorage.getItem('wish_list'));
   total = JSON.parse(localStorage.getItem('total'));
   total -= 1;
   let key = Object.keys(wish_list)[number];
   let item = wish_list[key];
   if (item.amount == 1){
      delete wish_list[key];
   } else {
      item.amount -=1;
      wish_list[key] = item;
   }
   let keys = Object.keys(wish_list);
   let str = '';
   for (let i = 0; i < keys.length; i++){
      str +=  '<div class = item_amount_line>' +  keys[i] + ': <div class = item_amount>' + wish_list[keys[i]].amount + ' <button class = cart_gumb onclick = "remove(' + i + ')"> - </button><button class = cart_gumb onclick = "add(' + i + ')"> + </button></div></div>'; 
   }
   document.querySelector('.bought').innerHTML = str;
   localStorage.wish_list = JSON.stringify(wish_list);
   localStorage.total = JSON.stringify(total);
}

function add(number){
   wish_list = JSON.parse(localStorage.getItem('wish_list'));
   total = JSON.parse(localStorage.getItem('total'));
   let key = Object.keys(wish_list)[number];
   item = wish_list[key];
   item.amount +=1;
   total += 1;
   wish_list[key] = item;
   let keys = Object.keys(wish_list);
   let str = '';
   for (let i = 0; i < keys.length; i++){
      str +=  '<div class = item_amount_line>' +  keys[i] + ': <div class = item_amount>' + wish_list[keys[i]].amount + ' <button class = cart_gumb onclick = "remove(' + i + ')"> - </button><button class = cart_gumb onclick = "add(' + i + ')"> + </button></div></div>'; 
   }
   document.querySelector('.bought').innerHTML = str;
   localStorage.wish_list = JSON.stringify(wish_list);
   localStorage.total = JSON.stringify(total);
}

function clear_cart(){
   wish_list = JSON.parse(localStorage.getItem('wish_list'));
   total = JSON.parse(localStorage.getItem('total'));
   total = 0;
   wish_list = {}
   document.querySelector('.bought').innerHTML = '';
   localStorage.wish_list = JSON.stringify(wish_list);
   localStorage.total = JSON.stringify(total);
}




document.querySelector('.bought').innerHTML = str;
localStorage.wish_list = JSON.stringify(wish_list);

